<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>tabibuddy | Edit Trip</title>

    <link href="https://fonts.googleapis.com/css?family=Raleway:400,500,500i,600,800" rel="stylesheet">
    <link rel='stylesheet' href="/stylesheets/top_bar_style.css" />
    <style>
      body {
        margin: 0;
        font-family: 'Raleway', sans-serif;
      }
      .invisible {
        display: none;
      }

      .background-container {
        position: fixed;
        top: 50px;
        width: 100%;
        height: 100%;
        z-index: -1;
        text-align: center;
        vertical-align: center;
      }
      .background-container img {
        width: 100%;
        height: 100%;
      }

      #edit-trip-container {
        position: relative;
        top: 100px;
        width: 100%;
        margin-bottom: 50px;
      } 

      #edit-trip-content {
        width: 40%;
        margin-left: 30%;
        padding: 30px 0 50px 0;
        word-wrap: break-word;
      }
      #edit-trip-content h1 {
        font-size: 2.5vw;
        color: white;
        text-align: center;
      }
      #edit-trip-content form {
        text-align: left;
        margin-left: 10%;
        padding: 0;
        color: #bdc3c7;
      }
      .form-title {
        width: 29%;
        padding-left: 1%;
        display: inline-block;
        background-color: #7f8c8d;
        color: white;
      }
      #title-input, #descripion-input {
        width: 60%;
        vertical-align: top;
      }
      #duration-input, #budget-input {
        width: 20%;
        vertical-align: top;
      }

      #save-trip {
        width: 20%;
        padding: 5px;
        margin-left: 40%;
        margin-top: 10px;
        margin-bottom: 10px;
        border-radius: 2px;
        background-color: #1abc9c;
        color: white;
        text-align: center;
        cursor: pointer;
      }

      #edit-trip-form-background {
        position: absolute;
        top: 0;
        left: 30%;
        bottom: 0;
        width: 40%;
        height: 100%;
        border-radius: 10px;
        background-color: #2c3e50;
        opacity: 0.9;
        z-index: -1;
      }
    </style>

  </head>
  <body>

    {{> top_bar showSearchBar=showSearchBar loggedIn=loggedIn}}


    <div class="background-container">
      <img src="/images/add-trip-background.jpg">
    </div>

    <div id="edit-trip-container">

      <div id="edit-trip-content">
        <h1>Edit Trip</h1>

        <form id="edit_trip_form" method="post" action="/edit_trip/{{tripID}}">

          <div class="form-title">Title: </div>
          <input id="title-input" type="text" name="title" placeholder="{{title}}">
          <br><br>

          <div class="form-title">Description: </div>
          <textarea id="descripion-input" form="edit_trip_form" name="description" placeholder="{{description}}"></textarea>
          <br><br>

          <div class="form-title" id="category-input" current="{{category}}">Category: </div>
<!--           <span id="category-input" current="{{category}}">Category: </span> -->
          <input type="checkbox" name="category" value="Adventure"><span id="category-Adventure" class="category-choices">Adventure</span>
          <input type="checkbox" name="category" value="Food"><span id="category-Food" class="category-choices">Food</span>
          <input type="checkbox" name="category" value="Art"><span id="category-Art" class="category-choices">Art</span>
          <input type="checkbox" name="category" value="History"><span id="category-History" class="category-choices">History</span>
          <br><br>


          <div class="form-title" id="season-input" current="{{season}}">Season: </div>
<!--           <span id="season-input" current="{{season}}">Season: </span> -->
          <input type="checkbox" name="season" value="Spring"><span id="season-Spring" class="season-choices">Spring</span>
          <input type="checkbox" name="season" value="Summer"><span id="season-Summer" class="season-choices">Summer</span>
          <input type="checkbox" name="season" value="Fall"><span id="season-Fall" class="season-choices">Fall</span>
          <input type="checkbox" name="season" value="Winter"><span id="season-Winter" class="season-choices">Winter</span>
          <br><br>

          <div class="form-title">(*)Duration: </div>
          <input id="duration-input" type="number" min="1" placeholder="{{duration}}" name="duration">
          <span> day(s)</span>
          <br><br>

          <div class="form-title">(*)Budget: </div>
          <span>&#36; </span><input id="budget-input" type="number" min="0" placeholder="{{budget}}" name="budget">
          <br><br>
        </form>

        <div id="save-trip">Save</div>
      </div>

      <div id="edit-trip-form-background">
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="/js/top_bar.js"></script>

    <script type="text/javascript">
      $(document).ready(function(){
        var category = $('#category-input').attr('current');
        var season = $('#season-input').attr('current');
        $('form input[name="category"][value="'+category+'"]').prop('checked',true);
        $('#category-'+category).css('color','white'); 
        $('form input[name="season"][value="'+season+'"]').prop('checked',true);
        $('#season-'+season).css('color','white'); 

        $('form input[name="category"]').on('click', function(){
          if ($('form input[name="category"]:checked').length === 0) {
            $(this).prop('checked',true);
          }
        });

        $('form input[name="season"]').on('click', function(){
          if ($('form input[name="season"]:checked').length === 0) {
            $(this).prop('checked',true);
          }
        });

        $('form input[name="category"]:not(checked)').on('click', function(){
          $('.category-choices').css('color','#bdc3c7');
          $('#category-'+$(this).val()).css('color','white'); 
          if ($('form input[name="category"]:checked').length > 1) {
            $('form input[name="category"]').prop('checked',false);
            $(this).prop('checked',true);
          }
        });

        $('form input[name="season"]:not(checked)').on('click', function(){
          $('.season-choices').css('color','#bdc3c7');
          $('#season-'+$(this).val()).css('color','white'); 
          if ($('form input[name="season"]:checked').length > 1) {
            $('form input[name="season"]').prop('checked',false);
            $(this).prop('checked',true);
          }
        });

        $('form input').on('keypress', function(e) {
          return e.which !== 13;
        });

        $('#save-trip').on('click', function(e) {
          if ($('#duration-input').val().length > 0 && $('#duration-input').val() < 1) {
            alert("Trip must be 1 day or longer");
          } else if ($('#budget-input').val().length > 0 && $('#budget-input').val() < 0) {
            alert("Budget must be $0 or higher");
          } else {
            $('form').submit();
          }
        });
      });
    </script>
  </body>
</html>

<!--         <span>(*)Title: </span>
        <input id="title-input" type="text" name="title" placeholder="{{title}}" required>
        <br><br>
        <span>(*)Description: </span>
        <input id="description-input" type="text" name="description" placeholder="{{description}}" required>
        <br><br>
        <span>(*)Category: </span>
        <select id="category-input" name="category" form="add_trip_form" current="{{category}}" required>
          <option value="adventure">Adventure</option>
          <option value="food">Food</option>
          <option value="art">Art</option>
          <option value="history">History</option>
        </select>
        <br><br>
        <span>(*)Season: </span>
        <input type="checkbox" name="season" value="spring">Spring
        <input type="checkbox" name="season" value="summer">Summer
        <input type="checkbox" name="season" value="fall">Fall
        <input type="checkbox" name="season" value="winter">Winter
        <br><br>
        <span>(*)</span><input id="duration-input" type="number" min="1" placeholder="{{duration}}" name="duration"><span> day(s)</span>
        <br><br>
        <span>&#36;</span><input id="budget-input" type="number" min="0" placeholder="{{budget}}" name="budget">
        <br><br>
        <button id="save-trip" type="submit">Save</button> -->